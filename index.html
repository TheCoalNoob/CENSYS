<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>CENSYS Dashboard</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; margin-top: 50px; }
    #ledStatus { font-size: 2em; font-weight: bold; }
    .on { color: green; }
    .off { color: red; }
  </style>
  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
</head>
<body>
  <h1>CENSYS Dashboard</h1>
  <p>LED State: <span id="ledStatus">Loading...</span></p>

  <script>
    // ===== Firebase Config =====
    const firebaseConfig = {
      databaseURL: "https://censys-c8752-default-rtdb.asia-southeast1.firebasedatabase.app/"
    };

    // Initialize Firebase
    const app = firebase.initializeApp(firebaseConfig);
    const database = firebase.database();

    const ledStatusEl = document.getElementById("ledStatus");

    // Listen for changes in Firebase
    const ledRef = database.ref("/ledState");
    ledRef.on("value", (snapshot) => {
      const state = snapshot.val();
      if (state) {
        ledStatusEl.textContent = "ON";
        ledStatusEl.className = "on";
      } else {
        ledStatusEl.textContent = "OFF";
        ledStatusEl.className = "off";
      }
    }, (error) => {
      console.error("Firebase read failed: ", error);
      ledStatusEl.textContent = "Error";
      ledStatusEl.className = "off";
    });
  </script>
</body>
</html>
